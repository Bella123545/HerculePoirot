<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Hercule Poirot — Reading Checklist</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial;margin:24px;background:#f7f7fb;color:#111}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
    h1{margin:0;font-size:1.5rem}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    .controls input[type=text]{padding:6px 8px;border-radius:6px;border:1px solid #ccc}
    button{padding:8px 10px;border-radius:8px;border:0;background:#222;color:#fff;cursor:pointer}
    button.ghost{background:#fff;color:#222;border:1px solid #ddd}
    .view-toggle{margin-top:8px;display:flex;gap:8px}
    .list ul{list-style:none;margin:0;padding:0}
    .list li{display:flex;align-items:center;gap:12px;padding:8px 6px;border-bottom:1px solid #f0f0f4}
    .list li:last-child{border-bottom:0}
    label{flex:1;cursor:pointer}
    .meta{font-size:0.85rem;color:#666}
    footer{margin-top:14px;color:#444;font-size:0.9rem;text-align:center}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:16px;margin-top:18px}
    .card{background:#fff;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.05);padding:12px;display:flex;flex-direction:column;align-items:center;text-align:center}
    .card img{width:100%;height:auto;border-radius:8px;max-height:300px;object-fit:cover;margin-bottom:10px}
  </style>
</head>
<body>
  <header>
    <div>
      <h1>Hercule Poirot — Reading Checklist</h1>
      <div class="meta">All titles (novels &amp; short-story collections) in publication order. Your checks are saved locally in your browser.</div>
      <div class="view-toggle">
        <button id="listView">List View</button>
        <button id="gridView" class="ghost">Image Grid View</button>
      </div>
    </div>
    <div class="controls">
      <input id="filter" type="text" placeholder="Search titles...">
      <button id="checkAll">Check all</button>
      <button id="uncheckAll" class="ghost">Uncheck all</button>
      <button id="export" class="ghost">Export checked</button>
    </div>
  </header>

  <main id="content" class="list"></main>

  <footer>
    <small>Derived from public bibliographies (Agatha Christie / Wikipedia).</small>
  </footer>

<script>
const books=[
  {title:"The Mysterious Affair at Styles (1920)",img:"https://i.harperapps.com/covers/9780063375901.jpg"},
  {title:"The Murder on the Links (1923)",img:"https://i.harperapps.com/covers/9780062986320.jpgg"},
  {title:"Poirot Investigates (1924)",img:"https://www.harpercollins.com/cdn/shop/files/9780063375918_b6e40e93-df6a-4777-8d24-c362ddaf09c8.jpg?v=1760204507&width=350"},
  {title:"The Murder of Roger Ackroyd (1926)",img:"https://covers.openlibrary.org/b/id/8235136-L.jpg"},
  {title:"The Big Four (1927)",img:"https://i.harperapps.com/covers/9780063375895.jpg"},
  {title:"The Mystery of the Blue Train (1928)",img:"https://covers.openlibrary.org/b/id/8235145-L.jpg"},
  {title:"Peril at End House (1932)",img:"https://i.harperapps.com/covers/9780063376014.jpg"},
  {title:"Lord Edgware Dies (1933)",img:"https://i.harperapps.com/covers/9780063376021.jpg"},
  {title:"Murder on the Orient Express (1934)",img:"https://covers.openlibrary.org/b/id/8235160-L.jpg"},
  {title: "Three Act Tragedy (1935)",img:"https://i.harperapps.com/covers/9780063376045.jpg"},
  {title:"Death in the Clouds (1935)",img:"https://i.harperapps.com/covers/9780063376038.jpg"},
  {title:"The A.B.C. Murders (1936)",img:"https://i.harperapps.com/covers/9780063375871.jpg"},
  {title:"Murder in Mesopotamia (1936)",img:"https://i.harperapps.com/covers/9780063376090.jpg"},
  {title:"Cards on the Table (1936)",img:"https://i.harperapps.com/covers/9780063376106.jpg"},
  {title:"Murder in the Mews (1937)",img:"https://covers.openlibrary.org/b/id/8235175-L.jpg"},
  {title:"Dumb Witness (1937)",img:"https://i.harperapps.com/covers/9780063376113.jpg"},
  {title:"Death on the Nile (1937)",img:"https://covers.openlibrary.org/b/id/8235180-L.jpg"},
  {title:"Appointment with Death (1938)",img:"https://i.harperapps.com/covers/9780063376144.jpg"},
  {title:"Hercule Poirot's Christmas (1938)",img:"https://i.harperapps.com/covers/9780063376977.jpg"},
  {title:"Sad Cypress (1940)",img:"https://i.harperapps.com/covers/9780063376151.jpg"},
  {title:"One, Two, Buckle My Shoe (1940)",img:"https://i.harperapps.com/covers/9780063376168.jpg"},
  {title:"Evil Under the Sun (1941)",img:"https://i.harperapps.com/covers/9780063376175.jpg"},
  {title:"Five Little Pigs (1942)",img:"https://i.harperapps.com/covers/9780063375888.jpg"},
  {title:"The Hollow (1946)",img:"https://i.harperapps.com/covers/9780063376182.jpg"},
  {title:"The Labours of Hercules (1947) — short stories",img:"https://i.harperapps.com/covers/9780063440036.jpg"},
  {title:"Taken at the Flood (1948)",img:"https://i.harperapps.com/covers/9780063376878.jpg"},
  {title:"The Under Dog and Other Stories (1951) — short stories",img:"https://covers.openlibrary.org/b/id/8235210-L.jpg"},
  {title:"Mrs McGinty's Dead (1952)",img:"https://i.harperapps.com/covers/9780063376915.jpg"},
  {title:"After the Funeral (1953)",img:"https://i.harperapps.com/covers/9780063376908.jpg"},
  {title:"Hickory Dickory Dock (1955)",img:"https://i.harperapps.com/covers/9780063376922.jpg"},
  {title:"Dead Man's Folly (1956)",img:"https://i.harperapps.com/covers/9780063376939.jpg"},
  {title:"Cat Among the Pigeons (1959)",img:"https://i.harperapps.com/covers/9780063376946.jpg"},
  {title:"The Clocks (1963)",img:"https://i.harperapps.com/covers/9780063376953.jpg"},
  {title:"Third Girl (1966)",img:"https://i.harperapps.com/covers/9780063376960.jpg"},
  {title:"Hallowe'en Party (1969)",img:"https://covers.openlibrary.org/b/id/8235250-L.jpg"},
  {title:"Elephants Can Remember (1972)",img:"https://i.harperapps.com/covers/9780063376991.jpg"},
  {title:"Curtain: Poirot's Last Case (1975)",img:"https://i.harperapps.com/covers/9780063376984.jpg"}
];

const storageKey='poirot-checklist-v2';
let state=JSON.parse(localStorage.getItem(storageKey)||'{}');
let view=state.view||'list';
let checked=state.checked||{};

function saveState(){localStorage.setItem(storageKey,JSON.stringify({view,checked}));}

function render(filter=''){
  const container=document.getElementById('content');
  container.innerHTML='';
  const f=filter.trim().toLowerCase();
  if(view==='list'){
    container.className='list';
    const ul=document.createElement('ul');
    books.forEach((b,i)=>{
      if(f && !b.title.toLowerCase().includes(f)) return;
      const li=document.createElement('li');
      const id='b'+i;
      li.innerHTML=`<input type="checkbox" id="${id}" ${checked[id]?'checked':''}><label for="${id}"><strong>${i+1}.</strong> ${b.title}</label>`;
      li.querySelector('input').addEventListener('change',e=>{checked[id]=e.target.checked;saveState();});
      ul.appendChild(li);
    });
    container.appendChild(ul);
  } else {
    container.className='grid';
    books.forEach((b,i)=>{
      if(f && !b.title.toLowerCase().includes(f)) return;
      const card=document.createElement('div');
      card.className='card';
      const id='b'+i;
      card.innerHTML=`<img src="${b.img}" alt="${b.title}"><div><input type="checkbox" id="${id}" ${checked[id]?'checked':''}><label for="${id}">${b.title}</label></div>`;
      card.querySelector('input').addEventListener('change',e=>{checked[id]=e.target.checked;saveState();});
      container.appendChild(card);
    });
  }
}

document.getElementById('filter').addEventListener('input',e=>render(e.target.value));
document.getElementById('checkAll').addEventListener('click',()=>{books.forEach((_,i)=>checked['b'+i]=true);saveState();render(document.getElementById('filter').value);});
document.getElementById('uncheckAll').addEventListener('click',()=>{books.forEach((_,i)=>checked['b'+i]=false);saveState();render(document.getElementById('filter').value);});
document.getElementById('export').addEventListener('click',()=>{
  const checkedTitles=[];books.forEach((b,i)=>{if(checked['b'+i])checkedTitles.push(`${i+1}. ${b.title}`);});
  if(checkedTitles.length===0){alert('No titles checked — nothing to export.');return;}
  const blob=new Blob([checkedTitles.join('\n')],{type:'text/plain'});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a');a.href=url;a.download='poirot-checked.txt';document.body.appendChild(a);a.click();a.remove();URL.revokeObjectURL(url);
});

document.getElementById('listView').addEventListener('click',()=>{view='list';saveState();render(document.getElementById('filter').value);});
document.getElementById('gridView').addEventListener('click',()=>{view='grid';saveState();render(document.getElementById('filter').value);});

render();
</script>
</body>
</html>
