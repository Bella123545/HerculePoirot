<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Hercule Poirot — Reading & Checklist</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial;margin:24px;background:#f7f7fb;color:#111}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    h1{margin:0;font-size:1.5rem}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    .controls input[type=text]{padding:6px 8px;border-radius:6px;border:1px solid #ccc}
    button{padding:8px 10px;border-radius:8px;border:0;background:#222;color:#fff;cursor:pointer}
    button.ghost{background:#fff;color:#222;border:1px solid #ddd}
    .list{margin-top:18px;background:#fff;padding:12px;border-radius:12px;box-shadow:0 6px 18px rgba(30,30,60,0.06)}
    ul{list-style:none;margin:0;padding:0}
    li{display:flex;align-items:center;gap:12px;padding:8px 6px;border-bottom:1px solid #f0f0f4}
    li:last-child{border-bottom:0}
    label{flex:1;cursor:pointer}
    .meta{font-size:0.85rem;color:#666}
    footer{margin-top:14px;color:#444;font-size:0.9rem}
    .actions{display:flex;gap:8px}
    .count{font-weight:600}
    @media (max-width:600px){header{flex-direction:column;align-items:flex-start}}
  </style>
</head>
<body>
  <header>
    <div>
      <h1>Hercule Poirot — Reading Checklist</h1>
      <div class="meta">All titles (novels &amp; short-story collections) in publication order. Your checks are saved locally in your browser.</div>
    </div>
    <div class="controls">
      <input id="filter" type="text" placeholder="Search titles...">
      <button id="checkAll">Check all</button>
      <button id="uncheckAll" class="ghost">Uncheck all</button>
      <button id="export" class="ghost">Export checked</button>
    </div>
  </header>

  <main class="list" role="main">
    <ul id="books">
      <!-- The list items are generated by the inline script -->
    </ul>
  </main>

  <footer>
    <div class="actions">
      <div class="count" id="progress">0 / 0 checked</div>
      <div style="flex:1"></div>
      <small>Derived from public bibliographies (Agatha Christie / Wikipedia).</small>
    </div>
  </footer>

<script>
// Definitive reading list (publication order) — novels & short-story collections featuring Hercule Poirot
const titles = [
  "The Mysterious Affair at Styles (1920)",
  "The Murder on the Links (1923)",
  "Poirot Investigates (1924) — short stories",
  "The Murder of Roger Ackroyd (1926)",
  "The Big Four (1927)",
  "The Mystery of the Blue Train (1928)",
  "Black Coffee (1930) — play (novelisation exists)",
  "Peril at End House (1932)",
  "Lord Edgware Dies (1933) — also 'Thirteen at Dinner'",
  "Murder on the Orient Express (1934)",
  "Three Act Tragedy (1935) — also 'Murder in Three Acts'",
  "Death in the Clouds (1935)",
  "The A.B.C. Murders (1936)",
  "Murder in Mesopotamia (1936)",
  "Cards on the Table (1936)",
  "Murder in the Mews (1937) — short stories",
  "Dumb Witness (1937)",
  "Death on the Nile (1937)",
  "Appointment with Death (1938)",
  "Hercule Poirot's Christmas (1938)",
  "Sad Cypress (1940)",
  "One, Two, Buckle My Shoe (1940)",
  "Evil Under the Sun (1941)",
  "Five Little Pigs (1942)",
  "The Hollow (1946)",
  "The Labours of Hercules (1947) — short stories",
  "Taken at the Flood (1948)",
  "The Under Dog and Other Stories (1951) — short stories",
  "Mrs McGinty's Dead (1952)",
  "After the Funeral (1953)",
  "Hickory Dickory Dock (1955)",
  "Dead Man's Folly (1956)",
  "Cat Among the Pigeons (1959)",
  "The Clocks (1963)",
  "Third Girl (1966)",
  "Hallowe'en Party (1969)",
  "Elephants Can Remember (1972)",
  "Poirot's Early Cases (1974) — short stories",
  "Curtain: Poirot's Last Case (1975)"
];

const listEl = document.getElementById('books');
const storageKey = 'poirot-checklist-v1';
let state = JSON.parse(localStorage.getItem(storageKey) || '{}');

function render(filter=''){
  listEl.innerHTML = '';
  const f = filter.trim().toLowerCase();
  titles.forEach((t,i)=>{
    if(f && !t.toLowerCase().includes(f)) return;
    const li = document.createElement('li');
    const id = 'b'+i;
    const checked = !!state[id];
    li.innerHTML = `
      <input type="checkbox" id="${id}" ${checked? 'checked':''}>
      <label for="${id}"><strong>${i+1}.</strong> ${escapeHtml(t)}</label>
    `;
    listEl.appendChild(li);
    li.querySelector('input').addEventListener('change', e=>{
      state[id] = e.target.checked;
      localStorage.setItem(storageKey, JSON.stringify(state));
      updateProgress();
    });
  });
  updateProgress();
}

function escapeHtml(s){ return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

function updateProgress(){
  const total = titles.length;
  let checked = 0;
  titles.forEach((_,i)=>{ if(state['b'+i]) checked++; });
  document.getElementById('progress').textContent = `${checked} / ${total} checked`;
}

// Controls
document.getElementById('filter').addEventListener('input', e=> render(e.target.value));
document.getElementById('checkAll').addEventListener('click', ()=>{
  titles.forEach((_,i)=> state['b'+i]=true);
  localStorage.setItem(storageKey, JSON.stringify(state));
  render(document.getElementById('filter').value);
});
document.getElementById('uncheckAll').addEventListener('click', ()=>{
  titles.forEach((_,i)=> state['b'+i]=false);
  localStorage.setItem(storageKey, JSON.stringify(state));
  render(document.getElementById('filter').value);
});
document.getElementById('export').addEventListener('click', ()=>{
  const checkedTitles = [];
  titles.forEach((t,i)=>{ if(state['b'+i]) checkedTitles.push(`${i+1}. ${t}`); });
  if(checkedTitles.length===0){ alert('No titles checked — nothing to export.'); return; }
  const blob = new Blob([checkedTitles.join('\n')], {type:'text/plain'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'poirot-checked.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
});

// initial render
render();
</script>
</body>
</html>
